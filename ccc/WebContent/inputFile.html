<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link href="resourse/bookstrap/css/bootstrap.min.css" rel="stylesheet" />
<script type="text/javascript " src="resourse/js/jquery-3.2.1.min.js"></script>
<script type="text/javascript " src="resourse/js/ajaxfileupload.js"></script>
<script type="text/javascript" src="resourse/bookstrap/js/bootstrap.min.js"></script>
<title>上传文件</title>
</head>
<body>
	<form action="innerServlet" method="post" class="form-inline">
		<div class="form-group">
			<label for="fileLable">File input</label>
			<input name="file" type="file" id="fileId" />
			<input type="button" value="上传" class="form-control" onclick="ajaxFileUpload()" />
			<img id="fileImage" style="width: 100px; height: 100px	" src=""  />
			<input type="hidden" value="" id=fileUrl name="fileName" value="data" />
		</div>
		<br>
		<button type="submit" class="btn btn-default">Submit</button>
	</form>
	<script type="text/javascript">
		
/*
		$(function() {//$(document).ready(function(){})
				$(":button").click(function() {
					ajaxFileUpload();
				})
			})
		*/ 
		function ajaxFileUpload() {
			$.ajaxFileUpload({
				url : 'fileServlet',//用于文件上传的服务器请求地址
				secureuri : false,//是否需要安全协议，一般false
				fileElementId : 'fileId',//文件上传域的id
				dataType : 'json', //返回值类型一般设置为json'
				success : function(data, status) {//服务器 成功响应处理函数
					/* alert(data); */
					console.info(data);
					console.info(status);
					$("#fileImage").attr("src", ".." + data); //加载图片
					$("#fileUrl").val(data); //加载图片
				},
				error : function(data, status, e) {//服务器响应失败处理函数
					alert(e);
				}
			})
			return false;
		}
	</script>
</body>
</html>